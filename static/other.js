console.time('reading files')
const fs = require('fs')
const {Script} = require('vm')
const code = fs.readFileSync('/Users/as-cii/Documents/github/atom/static/bundle.js')
// const blob = fs.readFileSync('/Users/as-cii/Documents/github/atom/compilation-result.bin')
console.timeEnd('reading files')
console.time('compiling')
const bundleScript = new Script(code)
// const bundleScript = new Script(code, {cachedData: blob})
// const bundleScript = new Script(code, {produceCachedData: true})
console.timeEnd('compiling')
// fs.writeFileSync('/Users/as-cii/Documents/github/atom/compilation-result.bin', bundleScript.cachedData)
console.time('evaluation')
bundleScript.runInThisContext()
// console.log(bundleScript.cachedDataRejected)
